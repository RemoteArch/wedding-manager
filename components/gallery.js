const{useState:e,useEffect:t,useRef:a}=React,l="/api/index.php/index",r=({item:e,onClose:t})=>e?React.createElement("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 animate-in fade-in duration-300",onClick:t},React.createElement("button",{className:"absolute top-6 right-6 text-white/70 hover:text-white transition-colors"},React.createElement("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 18L18 6M6 6l12 12"}))),React.createElement("div",{className:"max-w-5xl w-full max-h-[90vh] flex flex-col items-center",onClick:e=>e.stopPropagation()},"video"===e.file_type?React.createElement("video",{src:e.path,controls:!0,autoPlay:!0,className:"max-h-[80vh] rounded-lg shadow-2xl"}):React.createElement("img",{src:e.path,alt:"",className:"max-h-[80vh] object-contain rounded-lg shadow-2xl"}),React.createElement("div",{className:"mt-6 text-center"},React.createElement("p",{className:"gallery-serif text-white text-2xl"},e.invite_name),React.createElement("p",{className:"gallery-body text-white/50 text-sm mt-1"},"Partagé avec amour")))):null,c=({isOpen:t,onClose:r,onUploadSuccess:c})=>{const[s,n]=e(!1),[o,i]=e(""),[m,d]=e([]),[u,p]=e([]),[f,h]=e({}),[x,g]=e(""),v=a(null),b=()=>{i(""),d([]),p([]),h({}),g(""),v.current&&(v.current.value="")};return t?React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4"},React.createElement("div",{className:"absolute inset-0 bg-[#3E2723]/40 backdrop-blur-md",onClick:r}),React.createElement("div",{className:"relative w-full max-w-lg bg-[#FDFBF7] rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in duration-300 max-h-[90vh] flex flex-col"},React.createElement("div",{className:"bg-[#5B2A16] px-8 py-6 text-center flex-shrink-0"},React.createElement("h2",{className:"gallery-serif text-white text-2xl"},"Immortalisez vos instants"),React.createElement("p",{className:"gallery-body text-[#FFD365]/80 text-sm"},"Vos souvenirs seront ajoutés à l'album des mariés")),React.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),!o.trim()||0===m.length)return void g("Veuillez remplir tous les champs");n(!0),g("");const t=m.map(((e,t)=>(async(e,t)=>{const a=new FormData;a.append("invite_name",o.trim()),a.append("files",e),h((e=>({...e,[t]:"uploading"})));try{const e=await fetch(`${l}/upload`,{method:"POST",body:a}),r=await e.json();return r.success?(h((e=>({...e,[t]:"success"}))),{success:!0}):(h((e=>({...e,[t]:"error"}))),{success:!1,error:r.message})}catch(e){return h((e=>({...e,[t]:"error"}))),{success:!1,error:"Erreur de connexion"}}})(e,t))),a=await Promise.all(t),s=a.filter((e=>e.success)).length,i=a.filter((e=>!e.success)).length;i>0&&g(`${i} fichier(s) n'ont pas pu être envoyés`),s>0&&(c(),0===i&&setTimeout((()=>{r(),b()}),1e3)),n(!1)},className:"p-8 space-y-6 overflow-y-auto flex-1"},React.createElement("div",{className:"space-y-2"},React.createElement("label",{className:"gallery-serif text-[#5B2A16] text-sm font-semibold ml-1"},"Votre Nom"),React.createElement("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Ex: Famille Dupont",className:"w-full h-12 rounded-full bg-white border border-[#E2C7BC] px-6 gallery-body outline-none focus:ring-2 focus:ring-[#5B2A16]/10 transition-all"})),React.createElement("div",{onClick:()=>!s&&v.current?.click(),className:"group relative w-full min-h-[120px] rounded-[1.5rem] border-2 border-dashed border-[#E2C7BC] bg-white flex flex-col items-center justify-center cursor-pointer hover:border-[#5B2A16] transition-all"},React.createElement("div",{className:"text-center p-6"},React.createElement("div",{className:"w-12 h-12 bg-[#fef3ed] rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform"},React.createElement("svg",{className:"w-6 h-6 text-[#B45B37]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 4v16m8-8H4"}))),React.createElement("p",{className:"gallery-serif text-[#5B2A16] text-sm"},"Ajouter des photos ou vidéos"),React.createElement("p",{className:"gallery-body text-[#5B2A16]/50 text-xs mt-1"},"Sélection multiple possible"))),u.length>0&&React.createElement("div",{className:"space-y-3"},React.createElement("p",{className:"gallery-serif text-[#5B2A16] text-sm font-semibold"},m.length," fichier(s) sélectionné(s)"),React.createElement("div",{className:"grid grid-cols-3 gap-3 max-h-[200px] overflow-y-auto p-1"},u.map(((e,t)=>React.createElement("div",{key:t,className:"relative aspect-square rounded-xl overflow-hidden bg-[#fef3ed] group"},e.type.startsWith("video/")?React.createElement("video",{src:e.url,className:"w-full h-full object-cover"}):React.createElement("img",{src:e.url,alt:"",className:"w-full h-full object-cover"}),"uploading"===f[t]&&React.createElement("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center"},React.createElement("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})),"success"===f[t]&&React.createElement("div",{className:"absolute inset-0 bg-green-500/70 flex items-center justify-center"},React.createElement("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"}))),"error"===f[t]&&React.createElement("div",{className:"absolute inset-0 bg-red-500/70 flex items-center justify-center"},React.createElement("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}))),!s&&!f[t]&&React.createElement("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{d((t=>t.filter(((t,a)=>a!==e)))),p((t=>t.filter(((t,a)=>a!==e))))})(t)},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},React.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))))))),x&&React.createElement("p",{className:"text-red-500 text-sm text-center gallery-body italic"},x),React.createElement("div",{className:"flex gap-4 pt-2"},React.createElement("button",{type:"button",onClick:()=>{r(),b()},className:"flex-1 h-12 rounded-full text-[#5B2A16] gallery-serif hover:bg-black/5 transition-colors"},"Annuler"),React.createElement("button",{type:"submit",disabled:s||0===m.length,className:"flex-[2] h-12 rounded-full bg-[#5B2A16] text-white gallery-serif shadow-lg shadow-[#5B2A16]/20 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:grayscale"},s?"Envoi en cours...":"Partager "+(m.length>1?`${m.length} souvenirs`:"mon souvenir")))),React.createElement("input",{ref:v,type:"file",accept:"image/*,video/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files);if(t.length>0){d((e=>[...e,...t]));const e=t.map((e=>({url:URL.createObjectURL(e),type:e.type,name:e.name})));p((t=>[...t,...e]))}},className:"hidden"}))):null};export default()=>{const[a,s]=e([]),[n,o]=e(!0),[i,m]=e("all"),[d,u]=e(!1),[p,f]=e(null);t((()=>{h()}),[]);const h=async()=>{try{o(!0);const e=await fetch(`${l}/media`),t=await e.json();t.success&&s(t.data)}catch(e){console.error(e)}finally{o(!1)}},x=a.filter((e=>"all"===i||e.file_type===i));return React.createElement("div",{className:"bg-[#FDFBF7] text-[#3E2723]"},React.createElement("style",null,'\n                @import url(\'https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=EB+Garamond:wght@400..700&family=Dancing+Script:wght@400..700&display=swap\');\n                .gallery-serif { font-family: "Playfair Display", serif; }\n                .gallery-script { font-family: "Dancing Script", cursive; }\n                .gallery-body { font-family: "EB Garamond", serif; }\n                \n                /* Smooth scroll pour la page */\n                html { scroll-behavior: smooth; }\n            '),React.createElement("header",{className:"sticky top-0 z-40 bg-[#5B2A16]/95 backdrop-blur-md border-b border-[#FFD365]/10 px-4 md:px-8 py-3"},React.createElement("div",{className:"max-w-7xl mx-auto flex items-center justify-between"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-baseline md:gap-4"},React.createElement("h1",{className:"gallery-serif text-white text-xl md:text-2xl tracking-wide"},"Kristel & Frank"),React.createElement("span",{className:"gallery-script text-[#FFD365] text-md hidden md:block"},"Album de Mariage")),React.createElement("div",{className:"flex items-center gap-4 md:gap-8"},React.createElement("nav",{className:"hidden lg:flex gap-6"},["all","image","video"].map((e=>React.createElement("button",{key:e,onClick:()=>m(e),className:"gallery-serif text-[10px] uppercase tracking-[0.2em] transition-all "+(i===e?"text-[#FFD365]":"text-white/50 hover:text-white")},"all"===e?"Tous":"image"===e?"Photos":"Vidéos")))),React.createElement("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 rounded-full bg-[#FFD365] text-[#5B2A16] hover:bg-white transition-all transform active:scale-95 shadow-lg"},React.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M12 4v16m8-8H4"})),React.createElement("span",{className:"gallery-serif text-sm font-bold uppercase tracking-wider"},"Ajouter"))))),React.createElement("main",{className:"min-h-[calc(100vh-10rem)] md:min-h-[calc(100vh-140px)] px-4 py-8"},React.createElement("div",{className:"flex lg:hidden justify-center gap-6 mb-8 border-b border-[#E2C7BC]/30 pb-4"},["all","image","video"].map((e=>React.createElement("button",{key:e,onClick:()=>m(e),className:"gallery-serif text-xs uppercase tracking-[0.2em] transition-all relative "+(i===e?"text-[#5B2A16] font-bold":"text-[#5B2A16]/40")},"all"===e?"Tous":"image"===e?"Photos":"Vidéos")))),n?React.createElement("div",{className:"py-20 text-center"},React.createElement("div",{className:"animate-spin w-8 h-8 border-2 border-[#5B2A16] border-t-transparent rounded-full mx-auto"})):0===x.length?React.createElement("div",{className:"text-center py-20 bg-white/50 rounded-[2rem] border border-dashed border-[#E2C7BC]"},React.createElement("p",{className:"gallery-body text-[#5B2A16]/40 italic"},"Aucun souvenir partagé pour le moment...")):React.createElement("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4"},x.map(((e,t)=>React.createElement("div",{key:t,onClick:()=>f(e),className:"break-inside-avoid group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 cursor-zoom-in border border-[#E2C7BC]/20"},React.createElement("div",{className:"relative overflow-hidden"},"video"===e.file_type?React.createElement("div",{className:"relative"},React.createElement("video",{src:e.path,className:"w-full h-auto"}),React.createElement("div",{className:"absolute inset-0 bg-black/10 flex items-center justify-center"},React.createElement("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center"},React.createElement("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M8 5v14l11-7z"}))))):React.createElement("img",{src:e.path,alt:"",className:"w-full h-auto transform group-hover:scale-105 transition-transform duration-700 ease-out",loading:"lazy"}),React.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("p",{className:"gallery-serif text-white text-sm"},e.invite_name),React.createElement("a",{href:e.path,download:!0,onClick:e=>e.stopPropagation(),className:"w-8 h-8 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center hover:bg-white/40 transition-colors",title:"Télécharger"},React.createElement("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"}))))))))))),React.createElement("footer",{className:"py-6 bg-[#5B2A16] border-t border-[#FFD365]/10"},React.createElement("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4 text-white/50"},React.createElement("p",{className:"gallery-body text-[10px] tracking-[0.2em] uppercase"}," 2026 • Kristel & Frank"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-8 h-px bg-[#FFD365]/30"}),React.createElement("p",{className:"gallery-script text-[#FFD365] text-lg"},"Merci d'être là"),React.createElement("div",{className:"w-8 h-px bg-[#FFD365]/30"})))),React.createElement(c,{isOpen:d,onClose:()=>u(!1),onUploadSuccess:h}),React.createElement(r,{item:p,onClose:()=>f(null)}))};